from datetime import datetime
from re import sub

TRAIN_FACTOR_WEIGHTS = True
INFINITY = 1000
SMALL_NON_ZERO = 1e-100
LOG_ZERO = -1e3

# switches
ALWAYS_ARGMAX_ACTION = False
USE_MULTIENV = False
USE_CONV = False
USE_MACRO_ACTION = True
REWARD_SHAPING = True
Y_DOWNSAMPLING = True
X_DOWNSAMPLING = True
REPEAT_ACTION = False
N_ACTION_REPEAT = 6 if REPEAT_ACTION else 1
SL_ENABLE = True
RANDOM_INIT = True
# env constants
ENV_MAX_STEPS = 3000
SCREEN_WIDTH = 80 if X_DOWNSAMPLING else 160
SCREEN_HEIGHT = 52 if Y_DOWNSAMPLING else 210
INLINE_LEFT = 40
INLINE_RIGHT = 50
MAX_LANE = 10
PLAYER_MOVE_SPEED = 1 * N_ACTION_REPEAT if Y_DOWNSAMPLING else 4 * N_ACTION_REPEAT
HIT_IMPACT = 6 if Y_DOWNSAMPLING else 25
FINISHED_LINE = 22
LANES = [(42, 47), (38, 42), (34, 38), (30, 34), (26, 30), (22, 26), (18, 22), (14, 18), (10, 14), (6, 10)] \
    if Y_DOWNSAMPLING else \
    [(167, 187), (151, 169), (135, 153), (119, 137), (104, 121), (87, 104), (71, 89), (55, 73), (39, 57), (23, 41)]

# params
TEMPERATURE = 1000
WORKER_MAX_STEPS = 100000
SIM_STEPS = 15
BP_STEPS = 10
DEVICE = 'gpu'
N_GPU = 1
NUM_MULTI_ENV = 1
WORKERS = 1
EPISODES = 10000
LOG_DIR = 'freeway_logs'
VIDEO_DIR = 'video'
T_MAX = 8
RL_LR = 2e-3
SL_LR = 2e-3
BETA = .01
GAMMA = .999
UNIQUE_ID = int(sub('[-: ]', '', str(datetime.today()).split('.')[0]))
LOAD_MODEL = False
SEQUENTIAL = True
MULTI_FAC = 1
LAYER_OVER_POLICY = False

